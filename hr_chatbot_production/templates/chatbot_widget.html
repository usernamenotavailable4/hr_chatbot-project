<!doctype html><html><head><meta charset="utf-8"><title>Widget</title><link href="/static/chatbot_widget.css" rel="stylesheet"></head><body><div class="widget"><div class="header"><div class="title"><img src="/static/logo.png" class="logo_widget"/><div><div class="h1">HR Assistant</div><div class="muted">Ask about leaves, policies & more</div></div></div><button id="closeBtn" class="close">âœ•</button></div><div id="messages" class="messages"></div><div class="composer"><input id="inputBox" placeholder="Ask HR..."/><button id="sendBtn">Send</button></div></div><script>const apiChat='/api/chat/';const employee_id='EMP001';const employee_type='Teaching';function createMessage(text,who='bot'){const d=document.createElement('div');d.className='msg '+who;d.innerText=text;return d}function appendMsg(node){const box=document.getElementById('messages');box.appendChild(node);box.scrollTop=box.scrollHeight}async function sendQuery(txt){appendMsg(createMessage(txt,'user'));const payload={message:txt,employee_id,employee_type};try{const r=await fetch(apiChat,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const j=await r.json();const reply=j.reply||'No response';appendMsg(createMessage(reply,'bot'))}catch(e){appendMsg(createMessage('Error: '+e.message,'bot'))}}document.getElementById('sendBtn').onclick=()=>{const v=document.getElementById('inputBox').value.trim();if(!v)return;document.getElementById('inputBox').value='';sendQuery(v)};document.getElementById('inputBox').addEventListener('keydown',(e)=>{if(e.key==='Enter'){document.getElementById('sendBtn').click()}});document.getElementById('closeBtn').onclick=()=>{window.parent.postMessage({action:'close-chat'},'*')};</script></body></html>